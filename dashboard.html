<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Dashboard</title>

  <!-- PWA manifest + theme color -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2a4b8d">

  <!-- Optional: for iOS home screen icon -->
  <link rel="apple-touch-icon" href="Logo.png">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <script>
document.addEventListener("DOMContentLoaded", () => {
  const loggedIn = localStorage.getItem("isLoggedIn");

  if (!loggedIn) {
    window.location.replace("index.html");
  }
});
</script>


  <!-- Sticky Top Navigation Buttons -->
  <div class="sticky-nav">
    <div class="nav-left">
      <img src="Logo.png" alt="App Logo" class="nav-logo">
      <button id="viewPropertyBtn">View Property</button>
      <button id="addPropertyBtn">Add Property</button>
      <button id="viewTenantsBtn">View Tenants</button>
      <button id="addTenantsBtn">Add Tenants</button>
      <button id="helpBtn">Help</button>
      <button id="contactUsBtn">Contact Us</button>
    </div>
    <div class="nav-right">
      <button onclick="logout()">Sign Out</button>
    </div>
  </div>

  <h1>Property Dashboard</h1>

  <!-- ---------------- HOUSES SECTION ---------------- -->
  <section class="form-container" id="viewPropertySection">
    <h2>Houses, Flats & Villa</h2>

    <!-- ======== PROPERTY ANALYTICS / INSIGHTS ======== -->
    <div class="analytics-container">
      <div class="analytic-card">
        <h3 id="totalProperties">0</h3>
        <p>Total Properties</p>
      </div>

      <div class="analytic-card">
        <h3 id="filledProperties">0</h3>
        <p>Filled Properties</p>
      </div>

      <div class="analytic-card">
        <h3 id="emptyProperties">0</h3>
        <p>Empty Properties</p>
      </div>

      <div class="analytic-card">
        <h3 id="averageRent">₹0</h3>
        <p>Average Rent</p>
      </div>
    </div>
    <!-- ======== END ANALYTICS ======== -->

    <div class="filter-bar">
      <input type="text" id="filterAddress" placeholder="Enter address...">
      <select id="filterStatus">
        <option value="All">All Status</option>
        <option value="empty">Empty</option>
        <option value="filled">Filled</option>
      </select>
      <select id="filterHouseType">
        <option value="All">All House Types</option>
        <option value="Villa">Villa</option>
        <option value="Apartment">Apartment</option>
        <option value="Flat">Flat</option>
        <option value="BHK">BHK</option>
      </select>
      <select id="filterRent">
        <option value="All">All Rent Prices</option>
        <option value="0-10000">Below ₹10,000</option>
        <option value="10000-20000">₹10,000 - ₹20,000</option>
        <option value="20000-30000">₹20,000 - ₹30,000</option>
        <option value="30000-40000">₹30,000 - ₹40,000</option>
        <option value="40000-50000">₹40,000 - ₹50,000</option>
      </select>
      <button id="applyFilters">Search</button>
    </div>

    <!-- Container for dynamic table populated by script.js -->
    <div id="housesTableContainer"></div>

    <!-- Recently Added Properties Section -->
    <h2 style="margin-top:30px;">Recently Added Properties</h2>
    <div id="recentHousesContainer" class="recent-properties"></div>

    <!-- ================= ADVICE & TOOLS ================= -->
    <section id="adviceToolsSection">
      <h2>Advice & Tools</h2>
      <div class="advice-tools-cards" id="adviceToolsContainer">
        <!-- Cards will be injected here by JS -->
      </div>
    </section>

    <!-- ================= INTERIOR PROMO ================= -->
    <section class="interior-promo" style="margin-top: 30px;">
      <h2 class="section-heading">Transform your Home with <span class="brand">havenInteriors</span></h2>
      <div class="promo-content">
        <div class="promo-left">
          <img src="your-livingroom-image.jpeg" alt="Interior Design" class="promo-img">
        </div>
        <div class="promo-right">
          <h3>Why choose us?</h3>
          <p>✔ Compare & choose from <span class="highlight">300+ top verified interior brands</span></p>
          <p>✔ <span class="highlight-red">Calculate your interiors cost instantly</span> with our advanced estimator</p>
          <div class="brands-row">
            <span class="save">Save upto 40%</span>
            <img src="brand1.jpeg" alt="LiveSpace">
            <img src="brand2.jpeg" alt="Livin">
            <img src="brand3.png" alt="Spacemaker">
            <img src="brand4.png" alt="Bonito Designs">
          </div>
          <div class="promo-buttons">
            <button class="btn explore">Explore Brands</button>
            <button class="btn quote">Get Instant Quote</button>
          </div>
        </div>
      </div>
    </section>

  </section>

  <!-- ---------------- ADD PROPERTY SECTION ---------------- -->
  <section class="form-container" id="addPropertySection" style="display:none;">
    <h2>Add House</h2>
    <form id="addHouseForm">
      <input type="text" id="houseAddress" placeholder="Address" required>
      <select id="houseStatus" required>
        <option value="empty">Empty</option>
        <option value="filled">Filled</option>
      </select>
      <input type="number" id="houseRent" placeholder="Rent Price" step="0.01" required>
      <input type="text" id="houseType" placeholder="House Type (e.g., Villa, Apartment)" required>
      <select id="houseFurnished" required>
        <option value="Yes">Furnished</option>
        <option value="No">Unfurnished</option>
      </select>
      <input type="text" id="houseOwner" placeholder="Owner Name" required>
      <input type="number" id="houseArea" placeholder="Carpet Area (sq.ft)" step="0.01" required>
      <button type="submit">Add House</button>
    </form>

    <form id="editHouseForm" style="display:none; margin-top:10px;">
      <input type="hidden" id="editHouseId">
      <input type="text" id="editHouseAddress" placeholder="Address" required>
      <select id="editHouseStatus" required>
        <option value="empty">Empty</option>
        <option value="filled">Filled</option>
      </select>
      <input type="number" id="editHouseRent" placeholder="Rent Price" step="0.01" required>
      <input type="text" id="editHouseType" placeholder="House Type (e.g., Villa, Apartment)" required>
      <select id="editHouseFurnished" required>
        <option value="Yes">Furnished</option>
        <option value="No">Unfurnished</option>
      </select>
      <input type="text" id="editHouseOwner" placeholder="Owner Name" required>
      <input type="number" id="editHouseArea" placeholder="Carpet Area (sq.ft)" step="0.01" required>
      <button type="submit">Save Changes</button>
      <button type="button" onclick="document.getElementById('editHouseForm').style.display='none'">Cancel</button>
    </form>
  </section>

  <!-- ---------------- TENANTS SECTION ---------------- -->
  <section class="form-container" id="viewTenantSection" style="display:none;">
    <h2>Tenants</h2>
    <table id="tenantsTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Contract End</th>
          <th>House ID</th>
          <th>House Address</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="form-container" id="addTenantSection" style="display:none;">
    <h2>Add Tenant</h2>
    <form id="addTenantForm">
      <input type="text" id="tenantName" placeholder="Name" required>
      <input type="number" id="tenantHouseId" placeholder="House ID" required>
      <input type="date" id="tenantContractEnd" required>
      <button type="submit">Add Tenant</button>
    </form>

    <form id="editTenantForm" style="display:none; margin-top:10px;">
      <input type="hidden" id="editTenantId">
      <input type="text" id="editTenantName" placeholder="Name" required>
      <input type="number" id="editTenantHouse" placeholder="House ID" required>
      <input type="date" id="editTenantContractEnd" required>
      <button type="submit">Save Changes</button>
      <button type="button" onclick="document.getElementById('editTenantForm').style.display='none'">Cancel</button>
    </form>
  </section>

  <!-- ---------------- HELP SECTION ---------------- -->
  <section class="form-container" id="helpSection" style="display:none;">
    <h2>Help & Support</h2>
    <p>Welcome to Haven Homes! This section guides you through all features of the dashboard.</p>

    <div class="help-roles">
      <h3>Buyer / Tenant</h3>
      <ul>
        <li>View and filter properties</li>
        <li>Check property details</li>
        <li>Contact owners or agents</li>
      </ul>

      <h3>Owner / Agent / Builder</h3>
      <ul>
        <li>Add, edit, and delete properties</li>
        <li>Manage tenants and contracts</li>
        <li>Filter properties by status and rent</li>
      </ul>
    </div>

    <div class="help-tutorials">
      <h3>Step-by-Step Guides</h3>
      <details>
        <summary>How to Add a Property</summary>
        <p>Click "Add Property", fill the form, then submit.</p>
      </details>
      <details>
        <summary>How to Add a Tenant</summary>
        <p>Click "Add Tenants", fill the form, then submit.</p>
      </details>
    </div>

    <div class="help-faqs">
      <h3>FAQs</h3>
      <details>
        <summary>Why can't I see some properties?</summary>
        <p>Properties may be hidden due to role permissions or status.</p>
      </details>
      <details>
        <summary>What do the status colors mean?</summary>
        <p>Red = Empty, Green = Filled</p>
      </details>
    </div>

    <div class="help-contact">
      <h3>Contact Support</h3>
      <p>Email: support@havenhomes.com</p>
      <button onclick="window.location.href='mailto:support@havenhomes.com?subject=Help%20Request'">Report an Issue</button>
    </div>
  </section>

  <!-- ---------------- CONTACT US SECTION ---------------- -->
  <section class="form-container" id="contactSection" style="display:none;">
    <h2>Contact Us</h2>
    <form id="contactForm">
      <input type="text" id="contactName" placeholder="Your Name" required>
      <input type="email" id="contactEmail" placeholder="Your Email" required>
      <input type="text" id="contactSubject" placeholder="Subject">
      <textarea id="contactMessage" placeholder="Message" required></textarea>
      <button type="submit">Send Message</button>
    </form>
    <p id="contactResponse" style="color:green; margin-top:10px;"></p>
  </section>

  <script src="script.js"></script>
</body>
</html>
